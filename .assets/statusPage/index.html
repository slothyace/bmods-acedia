<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title id="tabName">Loading...</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <style>
      body {
        background-color: #2e2e2e;
      }
      #statusPageBanner {
        font-size: 32px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #ffffff;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1 id="statusPageBanner">Loading...</h1>
    <script>
      let updateInterval = 1000
      let initialisedConstant = false
      let rawData
      async function fetchRawData(){
        rawResponse = await fetch("/raw")
        rawData = await rawResponse.json()

        if(initialisedConstant == false){
          document.title = `${rawData.prjName} Status Page`
          document.getElementById("statusPageBanner").innerText = `${rawData.prjName} Status Page`
          updateInterval = rawData.updInterval
          initialisedConstant = true
        }
        

      }
      fetchRawData()

      setInterval(fetchRawData, updateInterval)
    </script>
  </body>
</html>